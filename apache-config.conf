<VirtualHost *:80>
    ServerName <domain.tld>

    # Enable proxying
    ProxyPreserveHost On
    ProxyRequests Off

    # API requests to backend (remove /api prefix)
    ProxyPass /api http://backend:8080/api
    ProxyPassReverse /api http://backend:8080/api

    # All other requests to frontend
    ProxyPass / http://frontend:80/
    ProxyPassReverse / http://frontend:80/

    # Error handling
    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 combined

    # Security headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
</VirtualHost>

